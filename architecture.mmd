graph TB
    subgraph "Developer"
        A[Git Push to main/develop]
    end

    subgraph "GitHub"
        B[Git Repository] --> C[GitHub Actions CI/CD]
    end

    subgraph "Docker Hub"
        D[Docker Images<br/>zeusdev27/myhello-app]
    end

    subgraph "AWS Cloud (ap-south-1)"
        subgraph "VPC & Networking"
            E[EKS Cluster<br/>nasa-eks v1.34]
            F[Node Groups<br/>t3.small instances<br/>3 nodes]
            G[S3 Backend<br/>Terraform State]
            H[DynamoDB<br/>State Locking]
        end

        subgraph "Kubernetes Components"
            I[NGINX Ingress<br/>Controller]
            J[cert-manager<br/>Let's Encrypt]
        end

        subgraph "Namespaces"
            subgraph "prod"
                K[Frontend App<br/>3 replicas]
                L[Ingress<br/>prod.nainika.store]
                M[TLS Certificate<br/>Let's Encrypt]
            end
            subgraph "stage"
                N[Frontend App<br/>2 replicas]
                O[Ingress<br/>stage.nainika.store]
                P[TLS Certificate<br/>Let's Encrypt]
            end
            subgraph "monitoring"
                Q[Prometheus<br/>Metrics Collection]
                R[Grafana<br/>Dashboards]
                S[Ingress<br/>grafana.nainika.store]
                T[TLS Certificate<br/>Let's Encrypt]
            end
        end
    end

    subgraph "External Services"
        U[Let's Encrypt<br/>ACME Server]
        V[Cloudflare<br/>DNS Records<br/>Full Strict SSL]
    end

    A --> B
    C -->|Terraform Plan/Apply| E
    C -->|Docker Build & Scan| D
    C -->|Helm Deploy| K
    C -->|Helm Deploy| N
    C -->|Helm Deploy| Q
    E --> F
    E --> G
    E --> H
    I --> L
    I --> O
    I --> S
    J --> M
    J --> P
    J --> T
    J -->|Requests Certs| U
    V -->|DNS-01 Challenge| U

    classDef aws fill:#FF9900,color:#000
    classDef k8s fill:#326CE5,color:#FFF
    classDef external fill:#6B46C1,color:#FFF
    classDef dev fill:#38A169,color:#FFF

    class A dev
    class E,F,G,H aws
    class I,J,K,L,M,N,O,P,Q,R,S,T k8s
    class U,V external